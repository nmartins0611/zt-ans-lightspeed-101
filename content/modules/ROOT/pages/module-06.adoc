= Lab Guide: Ansible Lightspeed Playground
:doctype: book
:notoc:
:toc-title: Table of Contents
:nosectnums:
:icons: font

_This guide provides an overview of the Ansible Lightspeed playground environment and instructions for exploring its features._

---

== Introduction and Setup

[IMPORTANT]
====
**Important Note About This Lab**

IBM watsonx Code Assistant models are continuously updated and improved. As a result, some specific task generation challenges in this lab may not work exactly as described due to model updates. This is expected behavior.

**The primary goal of this lab is to help you understand the key features of Ansible Lightspeed, including:**

* **Playbook Generation** - Generating entire playbooks from natural language prompts
* **Task Generation** - Generating individual tasks or multiple tasks at once
* **Training Matches** - Understanding the transparency of AI suggestions
* **Best Practices** - Learning how Lightspeed incorporates Ansible best practices

**If a specific prompt doesn't generate suggestions as expected:**

* Try **playbook generation** instead of task generation (click the Ansible icon â†’ **Generate a playbook** button, enter your prompt, review the outline, and click Continue)
* Experiment with different prompt variations to see what gives you the best suggestions
* Simplify complex multi-task prompts into separate single-task prompts
* The learning objectives remain the same: understanding how to work with AI-assisted Ansible development
====

This challenge provides a playground demo environment for the Ansible Lightspeed with IBM watsonx Code Assistant commercial service. This is for you to experiment with the use cases that best suit your workflows.

All demo content is available in the link:https://github.com/ansible/ansible-lightspeed-demos[Ansible Lightspeed demos repository].

[NOTE]
====
**Playground Environment:** This is a free-form playground where you can explore all the Ansible Lightspeed features you've learned. All demo playbooks from previous modules are available here.

**Credentials:**
* **Ansible Automation Platform:** `admin` / `ansible123!`
* **Gitea:** `gitea` / `gitea`
* **AWS/Azure credentials:** Available in the **AWS/Azure** tab
====

---

== Model Customization Overview

This lab also provides a video reference to **model customization**, a powerful feature of Ansible Lightspeed. Model customization lets you change the behavior of the default AI model by training it with your organization's existing automation content. This is a simple three-step process:

.   **Create training data** from your Ansible automation code using the `ansible-content-parser` CLI tool.
.   **Feed the training data** to the default model to customize it, using the IBM watsonx.ai Tuning Studio.
.   **Use the new model ID** from the Tuning Studio in your Ansible extension settings in Visual Studio Code.

NOTE: The lab includes the following video for reference: `../assets/AnsibleLightspeed_ModelCustomization.mp4`.

---

== The Playground Environment

This lab is designed as a "choose your own adventure" playground. The following tabs are available for you to explore.

[cols="1,3a", options="header"]
|===
| Tab name | Description
| VS Code | Visual Studio Code with Ansible extension and Lightspeed configured
| Ansible Automation Platform | Automation controller for running job templates
| Cockpit | Cockpit web console (available after running Cockpit demo)
| PGAdmin | PgAdmin interface (available after running PostgreSQL demo)
| AWS/Azure | Cloud account credentials for AWS and Azure demos
| gitea | Git repository containing all demo playbooks
|===

---

== How to Run a Demo

All instructions are also available in the link:https://github.com/ansible/ansible-lightspeed-demos[README of the repository].

=== Select a Demo in VS Code

.   **Open VS Code** by clicking the **VS Code** tab at the top of your lab environment.

[IMPORTANT]
====
**Work in a new browser tab:** For the best experience with Ansible Lightspeed features, **click the VS Code tab to open it in a new browser tab** rather than using the inline embedded window.
====

.   **Browse the demo playbooks.**
+
    a. On the left side of VS Code, click the **Explorer** icon (two overlapping documents)
+
    b. Expand the **playbooks** folder to see all available demos:
       * **playbooks/infra/install_cockpit/** - Cockpit deployment demo
       * **playbooks/infra/install_pgsql_and_pgadmin/** - PostgreSQL and PGAdmin demo
       * **playbooks/cloud/aws/** - AWS EC2 provisioning demo
       * **playbooks/cloud/azure/** - Azure VM provisioning demo

.   **Open a demo playbook.**
+
    a. Navigate to any demo folder (e.g., `playbooks/infra/install_cockpit/`)
+
    b. You'll see two playbooks:
       * **demo_<playbook_name>.yml** - Starting point with prompts for Lightspeed
       * **solution_<playbook_name>.yml** - Complete solution for reference
+
    c. Open the `demo_<playbook_name>.yml` file to start the demo

=== Execute the Playbook

You can choose to run the `demo_*.yml` Playbook using either **automation controller** or **`ansible-navigator`**.

==== Option 1: Using Automation Controller

.   **Commit and push the playbook to Git.**
+
    a. On the left side of VS Code, click the **Source Control** icon (branch with circles)
+
    b. Hover over your changed file and click the **+** icon to stage it
+
    c. Type a commit message in the "Message" box
+
    d. Click the **Commit** button (checkmark icon)
+
    e. Click **Sync Changes** to push to Git

.   **Run the corresponding Job Template.**
+
    a. Click the **Ansible Automation Platform** tab at the top
+
    b. Log in with `admin` / `ansible123!` if prompted
+
    c. Click **Resources** â†’ **Templates** on the left sidebar
+
    d. Find the matching job template for your demo:
+
[cols="1a,1a", options="header"]
|===
| Job Template name | Demo Playbook
| Deploy monitoring | `demo_install_cockpit.yml`
| Deploy PostgreSQL and PG Admin | `demo_install_pgsql_pgadmin.yml`
| Provision EC2 instance | `demo_provision_ec2_instance.yml`
| Provision Azure VM | `demo_provision_azure_vm.yml`
|===
+
    e. Click the **launch icon** (ðŸš€) next to the template
+
    f. Wait for the job to complete successfully

==== Option 2: Using ansible-navigator

.   **Open a terminal in VS Code.**
+
    a. Make sure you're on the **VS Code** tab
+
    b. Click **Terminal** â†’ **New Terminal** from the top menu
+
    c. A terminal panel will open at the bottom

.   **Navigate to the demo folder.**
+
    In the terminal, type a command like this (adjust for your chosen demo):
+
[source,bash]
----
cd playbooks/infra/install_cockpit
----

.   **Run the playbook.**
+
    Type the command and press `ENTER`:
+
[source,bash]
----
ansible-navigator run demo_install_cockpit.yml
----
+
    Press the `ESC` key to return to the prompt when done.

---

== Help and Additional Information

=== Ansible Lightspeed Features

There are TWO main ways to use Ansible Lightspeed in this playground:

==== Method 1: Playbook Generation (Recommended)

Generate an entire playbook from scratch using natural language:

.   **Access Playbook Generation:**
+
    a. On the left side of VS Code, click the **Ansible** icon (looks like an "A")
+
    b. In the **Ansible Lightspeed** section, click the **Generate a playbook** button
+
       * Note: This button only appears after you have successfully logged in and activated your trial

.   **Enter your prompt:**
+
    a. A new screen will open with a text box labeled "Describe what you want to achieve in natural language"
+
    b. Enter a description of what you want your playbook to do
+
    c. Click the **Analyze** button

[TIP]
====
**Writing effective prompts:**

* You do NOT need to include phrases like "Generate a playbook" or "Create a playbook" - the AI knows it's creating playbooks
* Just describe what you want your playbook to do in plain language
* Be specific about the tasks you want to accomplish

**Example prompts:**

* `for rhel hosts with sudo, install and configure Apache web server with SSL enabled`
* `configure PostgreSQL database on CentOS hosts and create a backup user`

You'll also see example prompts listed in the interface that you can use for inspiration.
====

.   **Review and edit the outline:**
+
    a. After clicking Analyze, Ansible Lightspeed will show an outline of the playbook
+
    b. The outline shows the suggested steps for your playbook
+
    c. **The outline is editable** - you can modify the steps as needed to match your requirements
+
    d. Review the outline and make any adjustments if necessary

.   **Generate the playbook:**
+
    a. Once you're satisfied with the outline, click the **Continue** button
+
    b. Ansible Lightspeed will generate the complete playbook based on the outline

.   **Save the playbook:**
+
    a. The playbook will open as "Untitled" in the editor
+
    b. Press `CTRL+S` (Windows/Linux) or `CMD+S` (Mac) to save the file
+
    c. Give your playbook a descriptive name ending with `.yml` (for example: `install_apache.yml`, `configure_database.yml`)
+
    d. Choose a location to save it (the `playbooks/` directory is recommended for organization)
+
    e. **Note:** If you save with the same name as a demo playbook (e.g., `demo_install_cockpit.yml`), you can use the existing job template in AAP. Otherwise, you'll need to create a new job template

==== Method 2: Task Generation

Generate individual tasks within an existing playbook:

.   **Single Task:**
+
    a. Uncomment a task name line by removing the `#` (or press `CTRL+/` / `CMD+/`)
+
    b. Place your cursor at the end of the task name line
+
    c. Press `ENTER` to create a new line
+
    d. Lightspeed will show a suggestion in gray text
+
    e. Press `TAB` to accept the suggestion

.   **Multi-Task:**
+
    a. Find a comment line with multiple tasks separated by `&`
+
    b. **Do NOT uncomment** - leave the `#` in place
+
    c. Place your cursor at the end of the line
+
    d. Press `ENTER` to create a new line
+
    e. Lightspeed will generate multiple tasks
+
    f. Press `TAB` to accept all suggestions

=== Solution Playbooks

If you need help or want to compare your work, solution playbooks are available in each demo folder with the `solution_` prefix (e.g., `solution_install_cockpit.yml`).

=== Complete the Lab

Congratulations! You've explored the Ansible Lightspeed playground and learned how to use both playbook generation and task generation features!

=== Additional Resources

* link:https://www.redhat.com/en/technologies/management/ansible/ansible-lightspeed[More information] on Red Hat Ansible Lightspeed with IBM watsonx Code Assistant
* link:https://docs.redhat.com/en/documentation/red_hat_ansible_lightspeed_with_ibm_watsonx_code_assistant[Ansible Lightspeed Documentation]
* link:https://github.com/ansible/ansible-lightspeed-demos[Ansible Lightspeed Demos Repository]
* link:https://www.youtube.com/ansibleautomation[Red Hat Ansible Automation Platform YouTube channel]

=== Feedback

Please provide your feedback or report bugs using the **Ansible Lightspeed Feedback** section located in the VS Code Ansible Extension sidebar.
